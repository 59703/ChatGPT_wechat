(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"07c5":function(t,e,n){"use strict";(function(t,e){var i=n("4ea4");n("238f");i(n("66fd"));var o=i(n("eb0f"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(o.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},1713:function(t,e,n){},"20b7":function(t,e,n){"use strict";n.r(e);var i=n("b0d6"),o=n.n(i);for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=o.a},"4ea1":function(t,e,n){"use strict";n.r(e);var i=n("bd3d"),o=n("71d0");for(var a in o)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(a);n("4fe3");var s=n("f0c5"),c=Object(s["a"])(o["default"],i["b"],i["c"],!1,null,"545b4d45",null,!1,i["a"],void 0);e["default"]=c.exports},"4fc2":function(t,e,n){},"4fe3":function(t,e,n){"use strict";var i=n("1713"),o=n.n(i);o.a},"5d3d":function(t,e,n){"use strict";var i=n("4fc2"),o=n.n(i);o.a},"71d0":function(t,e,n){"use strict";n.r(e);var i=n("fba4"),o=n.n(i);for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=o.a},b0d6:function(t,e,n){"use strict";(function(t){var i=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n("4ea1")),a=n("88d4"),s={components:{mpHtml:function(){Promise.all([n.e("common/vendor"),n.e("components/mp-html/mp-html")]).then(function(){return resolve(n("d05f"))}.bind(null,n)).catch(n.oe)},touch:o.default},data:function(){return{canvas:!1,input:"",scrollInto:"",chat:[],data:[],first:!0,succeed:!0,tagStyle:{p:"font-size: 26rpx;padding-top: 8px;padding-bottom: 8px;margin: 0;line-height: 26px;color: white",h1:"margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 34rpx;color: white",h2:"margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 32rpx;color: white",h3:"margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 30rpx;color: white",h4:"margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 28rpx;color: white",h5:"margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 26rpx;color: white",h6:"margin-top: 30px;margin-bottom: 15px;font-weight: bold;font-size: 26rpx;color: white",ol:"margin-top: 8px;margin-bottom: 8px;padding-left: 25px;color: black;color: white",ul:"margin-top: 8px;margin-bottom: 8px;padding-left: 25px;color: black;color: white",li:"margin-top: 5px;margin - bottom: 5 px;line - height: 26 px;color: white"}}},onLoad:function(){var e=this;this.enableCache(),t.$on("openHistory",(function(){e.openHistory()})),t.$on("closeHistory",(function(){e.closeHistory()})),t.$on("removePainting",(function(){e.removePainting()})),t.$on("canvasVisual",(function(){e.canvas=!1}))},methods:{console:function(){this.$refs.wechat.open("center"),t.vibrateShort()},copyGitHubLink:function(){t.setClipboardData({data:"https://github.com/dulaiduwang003/ChatGPT_wechat",success:function(e){t.showToast({icon:"none",duration:3e3,title:"已复制链接到粘贴板"})}})},copyBiliBili:function(){t.setClipboardData({data:"https://space.bilibili.com/1876478054?spm_id_from=333.337.search-card.all.click",success:function(e){t.showToast({icon:"none",duration:3e3,title:"已复制链接到粘贴板"})}})},enableCache:function(){"1"===(0,a.getHistoryEnable)()&&((0,a.getHistory)().length>0&&(this.canvas=!0),this.chat=(0,a.getPainting)(),this.data=(0,a.getHistory)())},sendMessage:function(){var e=this;if(this.succeed){this.canvas=!0,this.succeed=!1,this.chat.push({role:"user",content:this.input},{role:"assistant",content:""}),this.data.push({chat:[{role:"user",content:this.input},{role:"assistant",content:""}]});var n=this.data.length-1;this.$store.dispatch("gpt/gptTurbo",this.chat).then((function(i){var o=0,s=e,c=i.data["choices"][0]["message"]["content"],r=setInterval((function(){o<=c.length?s.data[n].chat[1].content=c.slice(0,o++)+"_|":(s.data[n].chat[1].content=c,"1"===(0,a.getHistoryEnable)()&&s.updateHistory(s.data),clearInterval(r)),t.vibrateShort()}),10);e.scrollInto="id-g-"+n})).catch((function(t){e.data[n].chat[1].content=t,"1"===(0,a.getHistoryEnable)()&&_this.updateHistory(_this.data)})).finally((function(){e.input="",e.succeed=!0})),this.chat.length>=5&&this.removePainting()}else t.showToast({icon:"none",duration:3e3,title:"请等待GPT的回应~"})},openHistory:function(){t.showToast({icon:"none",duration:3e3,title:"开启历史数据回显"}),(0,a.setHistoryEnable)("1"),(0,a.setHistory)(this.data),(0,a.setPainting)(this.chat)},updateHistory:function(){(0,a.setHistory)(this.data),(0,a.setPainting)(this.chat)},removePainting:function(){t.showToast({icon:"none",duration:3e3,title:"重置GPT会话成功"}),this.chat=[]},closeHistory:function(){t.showToast({icon:"none",duration:3e3,title:"关闭历史数据回显"}),(0,a.setHistoryEnable)("0"),(0,a.removeHistory)(),(0,a.removePainting)()},copyInput:function(t){this.input=this.data[t].chat[0].content},writeInputText:function(t){this.input=t}}};e.default=s}).call(this,n("543d")["default"])},bd3d:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return i}));var i={uniPopup:function(){return n.e("uni_modules/uni-popup/components/uni-popup/uni-popup").then(n.bind(null,"820f"))}},o=function(){var t=this.$createElement;this._self._c},a=[]},eb0f:function(t,e,n){"use strict";n.r(e);var i=n("f2f8"),o=n("20b7");for(var a in o)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(a);n("5d3d");var s=n("f0c5"),c=Object(s["a"])(o["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],void 0);e["default"]=c.exports},f2f8:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return i}));var i={mpHtml:function(){return Promise.all([n.e("common/vendor"),n.e("components/mp-html/mp-html")]).then(n.bind(null,"d05f"))},uniPopup:function(){return n.e("uni_modules/uni-popup/components/uni-popup/uni-popup").then(n.bind(null,"820f"))}},o=function(){var t=this,e=t.$createElement,n=(t._self._c,t.__map(t.data,(function(e,n){var i=t.__get_orig(e),o=e.chat[0].content.length,a=e.chat[1].content.length,s=e.chat[1].content.length;return{$orig:i,g0:o,g1:a,g2:s}})));t.$mp.data=Object.assign({},{$root:{l0:n}})},a=[]},fba4:function(t,e,n){"use strict";(function(t){var i=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n("3c57")),a=n("88d4"),s={data:function(){return{diameter:0,top:0,left:0,isMove:!1,ballAnimation:{},timeout:null,modile:{},checked:!1,r_checked:!1,b_checked:!1}},created:function(){this.renderLottie("#lottie","Windy.json"),this.modile=t.getSystemInfoSync(),this.top=this.modile.safeArea.top+400,this.left=this.modile.safeArea.right,this.diameter=this.modile.screenHeight/15,this.checked="1"===(0,a.getHistoryEnable)()},methods:{runIndex:function(){var e=this;t.showLoading({title:"返回主页",mask:!0}),this.b_checked=!0,setTimeout((function(){t.$emit("canvasVisual"),e.b_checked=!1,t.hideLoading()}),600)},cache:function(e){e.detail.value?(e.detail.value=!0,t.$emit("openHistory")):(t.$emit("closeHistory"),e.detail.value=!1)},restart:function(){var e=this;t.showLoading({title:"正在清除会话",mask:!0}),this.r_checked=!0,t.$emit("removePainting"),setTimeout((function(){e.r_checked=!1,t.hideLoading()}),600)},renderLottie:function(t,e){this.createSelectorQuery().select(t).node((function(t){var i=t.node,a=i.getContext("2d");i.width=300,i.height=300,o.default.setup(i),o.default.loadAnimation({loop:!0,autoplay:!0,animationData:n("cffa")("./"+e),rendererSettings:{context:a}})})).exec()},console:function(){this.$refs.controlPanel.open("top"),t.vibrateShort()},onTap:function(){var e="0";2*this.left>=this.modile.safeArea.width&&(e="-100%");var n=t.createAnimation({duration:0});n.translate(e).step(),this.ballAnimation=n.export(),this.overBall()},touchmove:function(t){this.isMove=!0,null!=this.timeout&&(clearTimeout(this.timeout),this.timeout=null);var e=t.touches[0]||t.changedTouches[0];this.left=e.clientX,this.top=e.clientY},touchend:function(t){this.isMove&&this.finish(t)},touchcancel:function(t){this.isMove&&this.finish(t)},finish:function(e){this.isMove=!1;var n=e.touches[0]||e.changedTouches[0];this.left=n.clientX,this.top=n.clientY;var i="0";2*this.left+this.diameter>=this.modile.safeArea.width?(this.left=this.modile.safeArea.width,i="-100%"):this.left=this.modile.safeArea.left,this.top>this.modile.safeArea.height+this.modile.safeAreaInsets.bottom?this.top=this.modile.safeArea.height+this.modile.safeAreaInsets.bottom:this.top<-this.diameter/2&&(this.top=-this.diameter/2);var o=t.createAnimation({duration:0});o.translate(i).step(),this.ballAnimation=o.export(),this.overBall()},overBall:function(){var e=this;e.timeout=setTimeout((function(){e.timeout=null;var n=t.createAnimation({duration:400,timingFunction:"ease-in"});n.translate("-50%").step(),e.ballAnimation=n.export()}),50)},doNothing:function(){}}};e.default=s}).call(this,n("543d")["default"])}},[["07c5","common/runtime","common/vendor"]]]);